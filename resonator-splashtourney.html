<!doctype html>
<html>
<head>
	<title id='title'>Dungeon-Thingy {ver}</title>
	<style type="text/css">
		html, body {
			text-align: center;
			height: 100%;
			padding: 0px;
			margin: 0px;
			background-color: #222;
			color: #fff;
		}
	</style>

	
	<!--  -->
	
	
	
	
<script>const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(_lut[255&t]+_lut[t>>8&255]+_lut[t>>16&255]+_lut[t>>24&255]+"-"+_lut[255&e]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[63&n|128]+_lut[n>>8&255]+"-"+_lut[n>>16&255]+_lut[n>>24&255]+_lut[255&i]+_lut[i>>8&255]+_lut[i>>16&255]+_lut[i>>24&255]).toLowerCase()}function clamp(t,e,n){return Math.max(e,Math.min(n,t))}function euclideanModulo(t,e){return(t%e+e)%e}function mapLinear(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)}function inverseLerp(t,e,n){return t!==e?(n-t)/(e-t):0}function lerp(t,e,n){return(1-n)*t+n*e}function damp(t,e,n,i){return lerp(t,e,1-Math.exp(-n*i))}function pingpong(t,e=1){return e-Math.abs(euclideanModulo(t,2*e)-e)}function smoothstep(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)}function smootherstep(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)}function randInt(t,e){return t+Math.floor(Math.random()*(e-t+1))}function randFloat(t,e){return t+Math.random()*(e-t)}function randFloatSpread(t){return t*(.5-Math.random())}function seededRandom(t){void 0!==t&&(_seed=t);t=_seed+=1831565813,t=Math.imul(t^t>>>15,1|t);return(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}function degToRad(t){return t*DEG2RAD}function radToDeg(t){return t*RAD2DEG}function isPowerOfTwo(t){return 0==(t&t-1)&&0!==t}function ceilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function floorPowerOfTwo(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function setQuaternionFromProperEuler(t,e,n,i,r){var s=Math.cos,o=Math.sin,a=s(n/2),u=o(n/2),h=s((e+i)/2),l=o((e+i)/2),c=s((e-i)/2),d=o((e-i)/2),_=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":t.set(a*l,u*c,u*d,a*h);break;case"YZY":t.set(u*d,a*l,u*c,a*h);break;case"ZXZ":t.set(u*c,u*d,a*l,a*h);break;case"XZX":t.set(a*l,u*p,u*_,a*h);break;case"YXY":t.set(u*_,a*l,u*p,a*h);break;case"ZYZ":t.set(u*p,u*_,a*l,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function denormalize(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function normalize(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class Quaternion{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],u=n[i+1],h=n[i+2],l=n[i+3];var n=r[s+0],i=r[s+1],c=r[s+2],r=r[s+3];if(0===o)t[e+0]=a,t[e+1]=u,t[e+2]=h,t[e+3]=l;else if(1===o)t[e+0]=n,t[e+1]=i,t[e+2]=c,t[e+3]=r;else{if(l!==r||a!==n||u!==i||h!==c){let t=1-o;var s=a*n+u*i+h*c+l*r,d=0<=s?1:-1,_=1-s*s,s=(_>Number.EPSILON&&(_=Math.sqrt(_),s=Math.atan2(_,s*d),t=Math.sin(t*s)/_,o=Math.sin(o*s)/_),o*d);a=a*t+n*s,u=u*t+i*s,h=h*t+c*s,l=l*t+r*s,t===1-o&&(_=1/Math.sqrt(a*a+u*u+h*h+l*l),a*=_,u*=_,h*=_,l*=_)}t[e]=a,t[e+1]=u,t[e+2]=h,t[e+3]=l}}static multiplyQuaternionsFlat(t,e,n,i,r,s){var o=n[i],a=n[i+1],u=n[i+2],n=n[i+3],i=r[s],h=r[s+1],l=r[s+2],r=r[s+3];return t[e]=o*r+n*i+a*l-u*h,t[e+1]=a*r+n*h+u*i-o*l,t[e+2]=u*r+n*l+o*h-a*i,t[e+3]=n*r-o*i-a*h-u*l,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,s=t._order,t=Math.cos,o=Math.sin,a=t(n/2),u=t(i/2),h=t(r/2),l=o(n/2),c=o(i/2),d=o(r/2);switch(s){case"XYZ":this._x=l*u*h+a*c*d,this._y=a*c*h-l*u*d,this._z=a*u*d+l*c*h,this._w=a*u*h-l*c*d;break;case"YXZ":this._x=l*u*h+a*c*d,this._y=a*c*h-l*u*d,this._z=a*u*d-l*c*h,this._w=a*u*h+l*c*d;break;case"ZXY":this._x=l*u*h-a*c*d,this._y=a*c*h+l*u*d,this._z=a*u*d+l*c*h,this._w=a*u*h-l*c*d;break;case"ZYX":this._x=l*u*h-a*c*d,this._y=a*c*h+l*u*d,this._z=a*u*d-l*c*h,this._w=a*u*h+l*c*d;break;case"YZX":this._x=l*u*h+a*c*d,this._y=a*c*h+l*u*d,this._z=a*u*d-l*c*h,this._w=a*u*h-l*c*d;break;case"XZY":this._x=l*u*h-a*c*d,this._y=a*c*h-l*u*d,this._z=a*u*d+l*c*h,this._w=a*u*h+l*c*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){var e=e/2,n=Math.sin(e);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(e),this._onChangeCallback(),this}setFromRotationMatrix(t){var t=t.elements,e=t[0],n=t[4],i=t[8],r=t[1],s=t[5],o=t[9],a=t[2],u=t[6],t=t[10],h=e+s+t;return 0<h?(h=.5/Math.sqrt(h+1),this._w=.25/h,this._x=(u-o)*h,this._y=(i-a)*h,this._z=(r-n)*h):s<e&&t<e?(h=2*Math.sqrt(1+e-s-t),this._w=(u-o)/h,this._x=.25*h,this._y=(n+r)/h,this._z=(i+a)/h):t<s?(h=2*Math.sqrt(1+s-e-t),this._w=(i-a)/h,this._x=(n+r)/h,this._y=.25*h,this._z=(o+u)/h):(h=2*Math.sqrt(1+t-e-s),this._w=(r-n)/h,this._x=(i+a)/h,this._y=(o+u)/h,this._z=.25*h),this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=n,this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(MathUtils.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){var n=this.angleTo(t);return 0!==n&&(e=Math.min(1,e/n),this.slerp(t,e)),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){var n=t._x,i=t._y,r=t._z,t=t._w,s=e._x,o=e._y,a=e._z,e=e._w;return this._x=n*e+t*s+i*a-r*o,this._y=i*e+t*o+r*s-n*a,this._z=r*e+t*a+n*o-i*s,this._w=t*e-n*s-i*o-r*a,this._onChangeCallback(),this}slerp(e,n){if(0!==n){if(1===n)return this.copy(e);var i,r,s=this._x,o=this._y,a=this._z,u=this._w;let t=u*e._w+s*e._x+o*e._y+a*e._z;t<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,t=-t):this.copy(e),1<=t?(this._w=u,this._x=s,this._y=o,this._z=a):((e=1-t*t)<=Number.EPSILON?(this._w=(i=1-n)*u+n*this._w,this._x=i*s+n*this._x,this._y=i*o+n*this._y,this._z=i*a+n*this._z,this.normalize()):(i=Math.sqrt(e),e=Math.atan2(i,t),r=Math.sin((1-n)*e)/i,n=Math.sin(n*e)/i,this._w=u*r+this._w*n,this._x=s*r+this._x*n,this._y=o*r+this._y*n,this._z=a*r+this._z*n),this._onChangeCallback())}return this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){var t=Math.random(),e=Math.sqrt(1-t),t=Math.sqrt(t),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(n),t*Math.sin(i),t*Math.cos(i),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(t=0,e=0,n=0){Vector3.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(_quaternion.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(_quaternion.setFromAxisAngle(t,e))}applyMatrix3(t){var e=this.x,n=this.y,i=this.z,t=t.elements;return this.x=t[0]*e+t[3]*n+t[6]*i,this.y=t[1]*e+t[4]*n+t[7]*i,this.z=t[2]*e+t[5]*n+t[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){var e=this.x,n=this.y,i=this.z,t=t.elements,r=1/(t[3]*e+t[7]*n+t[11]*i+t[15]);return this.x=(t[0]*e+t[4]*n+t[8]*i+t[12])*r,this.y=(t[1]*e+t[5]*n+t[9]*i+t[13])*r,this.z=(t[2]*e+t[6]*n+t[10]*i+t[14])*r,this}applyQuaternion(t){var e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,t=t.w,a=t*e+s*i-o*n,u=t*n+o*e-r*i,h=t*i+r*n-s*e,e=-r*e-s*n-o*i;return this.x=a*t+e*-r+u*-o-h*-s,this.y=u*t+e*-s+h*-r-a*-o,this.z=h*t+e*-o+a*-s-u*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){var e=this.x,n=this.y,i=this.z,t=t.elements;return this.x=t[0]*e+t[4]*n+t[8]*i,this.y=t[1]*e+t[5]*n+t[9]*i,this.z=t[2]*e+t[6]*n+t[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){var n=t.x,i=t.y,t=t.z,r=e.x,s=e.y,e=e.z;return this.x=i*e-t*s,this.y=t*r-n*e,this.z=n*s-i*r,this}projectOnVector(t){var e=t.lengthSq();return 0===e?this.set(0,0,0):(e=t.dot(this)/e,this.copy(t).multiplyScalar(e))}projectOnPlane(t){return _vector.copy(this).projectOnVector(t),this.sub(_vector)}reflect(t){return this.sub(_vector.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===e?Math.PI/2:(t=this.dot(t)/e,Math.acos(MathUtils.clamp(t,-1,1)))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return e*e+n*n+t*t}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=t,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random2(){return this.x=Math.random()-.5,this.y=Math.random()-.5,this.z=0,this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector=new Vector3;class Matrix4{constructor(){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,i,r,s,o,a,u,h,l,c,d,_,p,m){var f=this.elements;return f[0]=t,f[4]=e,f[8]=n,f[12]=i,f[1]=r,f[5]=s,f[9]=o,f[13]=a,f[2]=u,f[6]=h,f[10]=l,f[14]=c,f[3]=d,f[7]=_,f[11]=p,f[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(t){var e=this.elements,t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this}copyPosition(t){var e=this.elements,t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this}setFromMatrix3(t){t=t.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){var e=this.elements,n=t.elements,i=1/_v1.setFromMatrixColumn(t,0).length(),r=1/_v1.setFromMatrixColumn(t,1).length(),t=1/_v1.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*t,e[9]=n[9]*t,e[10]=n[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){var e,n,i,r,s=this.elements,o=t.x,a=t.y,u=t.z,h=Math.cos(o),o=Math.sin(o),l=Math.cos(a),a=Math.sin(a),c=Math.cos(u),u=Math.sin(u);return"XYZ"===t.order?(n=h*c,i=h*u,r=o*c,e=o*u,s[0]=l*c,s[4]=-l*u,s[8]=a,s[1]=i+r*a,s[5]=n-e*a,s[9]=-o*l,s[2]=e-n*a,s[6]=r+i*a,s[10]=h*l):"YXZ"===t.order?(e=l*u,n=a*c,s[0]=(r=l*c)+(i=a*u)*o,s[4]=n*o-e,s[8]=h*a,s[1]=h*u,s[5]=h*c,s[9]=-o,s[2]=e*o-n,s[6]=i+r*o,s[10]=h*l):"ZXY"===t.order?(e=l*u,n=a*c,s[0]=(i=l*c)-(r=a*u)*o,s[4]=-h*u,s[8]=n+e*o,s[1]=e+n*o,s[5]=h*c,s[9]=r-i*o,s[2]=-h*a,s[6]=o,s[10]=h*l):"ZYX"===t.order?(e=h*c,n=h*u,r=o*c,i=o*u,s[0]=l*c,s[4]=r*a-n,s[8]=e*a+i,s[1]=l*u,s[5]=i*a+e,s[9]=n*a-r,s[2]=-a,s[6]=o*l,s[10]=h*l):"YZX"===t.order?(i=h*l,e=h*a,n=o*l,r=o*a,s[0]=l*c,s[4]=r-i*u,s[8]=n*u+e,s[1]=u,s[5]=h*c,s[9]=-o*c,s[2]=-a*c,s[6]=e*u+n,s[10]=i-r*u):"XZY"===t.order&&(e=h*l,n=h*a,i=o*l,r=o*a,s[0]=l*c,s[4]=-u,s[8]=a*c,s[1]=e*u+r,s[5]=h*c,s[9]=n*u-i,s[2]=i*u-n,s[6]=o*c,s[10]=r*u+e),s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_zero,t,_one)}lookAt(t,e,n){var i=this.elements;return _z.subVectors(t,e),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(n,_z),0===_x.lengthSq()&&(1===Math.abs(n.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(n,_z)),_x.normalize(),_y.crossVectors(_z,_x),i[0]=_x.x,i[4]=_y.x,i[8]=_z.x,i[1]=_x.y,i[5]=_y.y,i[9]=_z.y,i[2]=_x.z,i[6]=_y.z,i[10]=_z.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){var t=t.elements,e=e.elements,n=this.elements,i=t[0],r=t[4],s=t[8],o=t[12],a=t[1],u=t[5],h=t[9],l=t[13],c=t[2],d=t[6],_=t[10],p=t[14],m=t[3],f=t[7],y=t[11],t=t[15],x=e[0],v=e[4],g=e[8],b=e[12],w=e[1],M=e[5],A=e[9],z=e[13],k=e[2],T=e[6],S=e[10],C=e[14],E=e[3],I=e[7],G=e[11],e=e[15];return n[0]=i*x+r*w+s*k+o*E,n[4]=i*v+r*M+s*T+o*I,n[8]=i*g+r*A+s*S+o*G,n[12]=i*b+r*z+s*C+o*e,n[1]=a*x+u*w+h*k+l*E,n[5]=a*v+u*M+h*T+l*I,n[9]=a*g+u*A+h*S+l*G,n[13]=a*b+u*z+h*C+l*e,n[2]=c*x+d*w+_*k+p*E,n[6]=c*v+d*M+_*T+p*I,n[10]=c*g+d*A+_*S+p*G,n[14]=c*b+d*z+_*C+p*e,n[3]=m*x+f*w+y*k+t*E,n[7]=m*v+f*M+y*T+t*I,n[11]=m*g+f*A+y*S+t*G,n[15]=m*b+f*z+y*C+t*e,this}multiplyScalar(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],u=t[13],h=t[2],l=t[6],c=t[10],d=t[14];return t[3]*(+r*a*l-i*u*l-r*o*c+n*u*c+i*o*d-n*a*d)+t[7]*(+e*a*d-e*u*c+r*s*c-i*s*d+i*u*h-r*a*h)+t[11]*(+e*u*l-e*o*d-r*s*l+n*s*d+r*o*h-n*u*h)+t[15]*(-i*o*h-e*a*l+e*o*c+i*s*l-n*s*c+n*a*h)}transpose(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],h=t[8],l=t[9],c=t[10],d=t[11],_=t[12],p=t[13],m=t[14],f=t[15],y=l*m*u-p*c*u+p*a*d-o*m*d-l*a*f+o*c*f,x=_*c*u-h*m*u-_*a*d+s*m*d+h*a*f-s*c*f,v=h*p*u-_*l*u+_*o*d-s*p*d-h*o*f+s*l*f,g=_*l*a-h*p*a-_*o*c+s*p*c+h*o*m-s*l*m,b=e*y+n*x+i*v+r*g;return 0==b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=y*(y=1/b),t[1]=(p*c*r-l*m*r-p*i*d+n*m*d+l*i*f-n*c*f)*y,t[2]=(o*m*r-p*a*r+p*i*u-n*m*u-o*i*f+n*a*f)*y,t[3]=(l*a*r-o*c*r-l*i*u+n*c*u+o*i*d-n*a*d)*y,t[4]=x*y,t[5]=(h*m*r-_*c*r+_*i*d-e*m*d-h*i*f+e*c*f)*y,t[6]=(_*a*r-s*m*r-_*i*u+e*m*u+s*i*f-e*a*f)*y,t[7]=(s*c*r-h*a*r+h*i*u-e*c*u-s*i*d+e*a*d)*y,t[8]=v*y,t[9]=(_*l*r-h*p*r-_*n*d+e*p*d+h*n*f-e*l*f)*y,t[10]=(s*p*r-_*o*r+_*n*u-e*p*u-s*n*f+e*o*f)*y,t[11]=(h*o*r-s*l*r-h*n*u+e*l*u+s*n*d-e*o*d)*y,t[12]=g*y,t[13]=(h*p*i-_*l*i+_*n*c-e*p*c-h*n*m+e*l*m)*y,t[14]=(_*o*i-s*p*i-_*n*a+e*p*a+s*n*m-e*o*m)*y,t[15]=(s*l*i-h*o*i+h*n*a-e*l*a-s*n*c+e*o*c)*y,this)}scale(t){var e=this.elements,n=t.x,i=t.y,t=t.z;return e[0]*=n,e[4]*=i,e[8]*=t,e[1]*=n,e[5]*=i,e[9]*=t,e[2]*=n,e[6]*=i,e[10]*=t,e[3]*=n,e[7]*=i,e[11]*=t,this}getMaxScaleOnAxis(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,t))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){var e=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this}makeRotationY(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this}makeRotationZ(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){var n=Math.cos(e),e=Math.sin(e),i=1-n,r=t.x,s=t.y,t=t.z,o=i*r,a=i*s;return this.set(o*r+n,o*s-e*t,o*t+e*s,0,o*s+e*t,a*s+n,a*t-e*r,0,o*t-e*s,a*t+e*r,i*t*t+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){var i=this.elements,r=e._x,s=e._y,o=e._z,e=e._w,a=r+r,u=s+s,h=o+o,l=r*a,c=r*u,r=r*h,d=s*u,s=s*h,o=o*h,a=e*a,u=e*u,e=e*h,h=n.x,_=n.y,n=n.z;return i[0]=(1-(d+o))*h,i[1]=(c+e)*h,i[2]=(r-u)*h,i[3]=0,i[4]=(c-e)*_,i[5]=(1-(l+o))*_,i[6]=(s+a)*_,i[7]=0,i[8]=(r+u)*n,i[9]=(s-a)*n,i[10]=(1-(l+d))*n,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){var i=this.elements;let r=_v1.set(i[0],i[1],i[2]).length();var s=_v1.set(i[4],i[5],i[6]).length(),o=_v1.set(i[8],i[9],i[10]).length(),t=(this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],_m1.copy(this),1/r),i=1/s,a=1/o;return _m1.elements[0]*=t,_m1.elements[1]*=t,_m1.elements[2]*=t,_m1.elements[4]*=i,_m1.elements[5]*=i,_m1.elements[6]*=i,_m1.elements[8]*=a,_m1.elements[9]*=a,_m1.elements[10]*=a,e.setFromRotationMatrix(_m1),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s){var o=this.elements,a=2*r/(n-i),u=(e+t)/(e-t),n=(n+i)/(n-i),i=-(s+r)/(s-r),s=-2*s*r/(s-r);return o[0]=2*r/(e-t),o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=a,o[9]=n,o[13]=0,o[2]=0,o[6]=0,o[10]=i,o[14]=s,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,n,i,r,s){var o=this.elements,a=1/(e-t),u=1/(n-i),h=1/(s-r),e=(e+t)*a,t=(n+i)*u,n=(s+r)*h;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-e,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-t,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-n,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){var e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(e,n=0){for(let t=0;t<16;t++)this.elements[t]=e[t+n];return this}toArray(t=[],e=0){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const _v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion=new Quaternion;class Euler{constructor(t=0,e=0,n=0,i=Euler.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){var t=t.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],u=t[9],h=t[2],l=t[6],c=t[10];switch(e){case"XYZ":this._y=Math.asin(clamp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,c),this._z=Math.atan2(-r,i)):(this._x=Math.atan2(l,a),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,c),this._z=Math.atan2(o,a)):(this._y=Math.atan2(-h,i),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-h,c),this._z=Math.atan2(-r,a)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-clamp(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(l,c),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-r,a));break;case"YZX":this._z=Math.asin(clamp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,a),this._y=Math.atan2(-h,i)):(this._x=0,this._y=Math.atan2(s,c));break;case"XZY":this._z=Math.asin(-clamp(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(l,a),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-u,c),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return _matrix.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_matrix,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return _quaternion.setFromEuler(this),this.setFromQuaternion(_quaternion,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],(vec=(t,e,n)=>new Vector3(t,e,n)).zero=vec(0,0,0),vec.one=vec(1,1,1),vec.left=vec(-1,0,0),vec.right=vec(1,0,0),vec.up=vec(0,-1,0),vec.down=vec(0,1,0),function(t){var e;"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):("undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Victor=t())}(function(){return function i(r,s,o){function a(n,t){if(!s[n]){if(!r[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(u)return u(n,!0);throw new Error("Cannot find module '"+n+"'")}t=s[n]={exports:{}};r[n][0].call(t.exports,function(t){var e=r[n][1][t];return a(e||t)},t,t.exports,i,r,s,o)}return s[n].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);this.x=t||0,this.y=e||0}(e.exports=i).fromArray=function(t){return new i(t[0]||0,t[1]||0)},i.fromObject=function(t){return new i(t.x||0,t.y||0)},i.prototype.addX=function(t){return this.x+=t.x,this},i.prototype.addY=function(t){return this.y+=t.y,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},i.prototype.addScalarX=function(t){return this.x+=t,this},i.prototype.addScalarY=function(t){return this.y+=t,this},i.prototype.subtractX=function(t){return this.x-=t.x,this},i.prototype.subtractY=function(t){return this.y-=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},i.prototype.subtractScalarX=function(t){return this.x-=t,this},i.prototype.subtractScalarY=function(t){return this.y-=t,this},i.prototype.divideX=function(t){return this.x/=t.x,this},i.prototype.divideY=function(t){return this.y/=t.y,this},i.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.prototype.divideScalar=function(t){return 0!==t?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},i.prototype.divideScalarX=function(t){return 0!==t?this.x/=t:this.x=0,this},i.prototype.divideScalarY=function(t){return 0!==t?this.y/=t:this.y=0,this},i.prototype.invertX=function(){return this.x*=-1,this},i.prototype.invertY=function(){return this.y*=-1,this},i.prototype.invert=function(){return this.invertX(),this.invertY(),this},i.prototype.multiplyX=function(t){return this.x*=t.x,this},i.prototype.multiplyY=function(t){return this.y*=t.y,this},i.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.multiplyScalarX=function(t){return this.x*=t,this},i.prototype.multiplyScalarY=function(t){return this.y*=t,this},i.prototype.norm=i.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):this.divide(i(t,t)),this},i.prototype.limit=function(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this},i.prototype.randomize=function(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this},i.prototype.randomizeX=function(t,e){var n=Math.min(t.x,e.x),t=Math.max(t.x,e.x);return this.x=s(n,t),this},i.prototype.randomizeY=function(t,e){var n=Math.min(t.y,e.y),t=Math.max(t.y,e.y);return this.y=s(n,t),this},i.prototype.randomizeAny=function(t,e){return Math.round(Math.random())?this.randomizeX(t,e):this.randomizeY(t,e),this},i.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.toFixed=function(t){return this.x=this.x.toFixed(t=void 0===t?8:t),this.y=this.y.toFixed(t),this},i.prototype.mixX=function(t,e){return this.x=(1-(e=void 0===e?.5:e))*this.x+e*t.x,this},i.prototype.mixY=function(t,e){return this.y=(1-(e=void 0===e?.5:e))*this.y+e*t.y,this},i.prototype.mix=function(t,e){return this.mixX(t,e),this.mixY(t,e),this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyX=function(t){return this.x=t.x,this},i.prototype.copyY=function(t){return this.y=t.y,this},i.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},i.prototype.zero=function(){return this.x=this.y=0,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},i.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.horizontalAngleDeg=function(){return o(this.horizontalAngle())},i.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},i.prototype.verticalAngleDeg=function(){return o(this.verticalAngle())},i.prototype.angle=i.prototype.horizontalAngle,i.prototype.angleDeg=i.prototype.horizontalAngleDeg,i.prototype.direction=i.prototype.horizontalAngle,i.prototype.rotate=function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),t=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=t,this},i.prototype.rotateDeg=function(t){return this.rotate(t/=r)},i.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},i.prototype.rotateToDeg=function(t){return this.rotateTo(t/=r)},i.prototype.rotateBy=function(t){t=this.angle()+t;return this.rotate(t)},i.prototype.rotateByDeg=function(t){return this.rotateBy(t/=r)},i.prototype.distanceX=function(t){return this.x-t.x},i.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},i.prototype.distanceY=function(t){return this.y-t.y},i.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},i.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},i.prototype.distanceSq=function(t){var e=this.distanceX(t),t=this.distanceY(t);return e*e+t*t},i.prototype.length=function(){return Math.sqrt(this.lengthSq())},i.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},i.prototype.magnitude=i.prototype.length,i.prototype.isZero=function(){return 0===this.x&&0===this.y},i.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},i.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},i.prototype.toArray=function(){return[this.x,this.y]},i.prototype.toObject=function(){return{x:this.x,y:this.y}};var r=180/Math.PI;function s(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function o(t){return t*r}},{}]},{},[1])(1)}),function(){"use strict";function t(){this.init()}function e(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")}t.prototype={init:function(){var t=this||x;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||x;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,!e._muted){e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,x.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),r=0;r<i.length;r++){var s=e._howls[n]._soundById(i[r]);s&&s._node&&(s._node.volume=s._volume*t)}}return e}return e._volume},mute:function(t){var e=this||x;e.ctx||c(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,x.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var i=e._howls[n]._getSoundIds(),r=0;r<i.length;r++){var s=e._howls[n]._soundById(i[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},stop:function(){for(var t=this||x,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||x,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||x)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||x;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var t,e,n,i,r=this||x,s=null;try{s="undefined"!=typeof Audio?new Audio:null}catch(t){return r}return s&&"function"==typeof s.canPlayType&&(t=s.canPlayType("audio/mpeg;").replace(/^no$/,""),e=(e=(n=r._navigator?r._navigator.userAgent:"").match(/OPR\/([0-6].)/g))&&parseInt(e[0].split("/")[1],10)<33,i=-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome"),n=n.match(/Version\/(.*?) /),i=i&&n&&parseInt(n[1],10)<15,r._codecs={mp3:!(e||!t&&!s.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!s.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(s.canPlayType('audio/wav; codecs="1"')||s.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!s.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!s.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(s.canPlayType("audio/x-m4b;")||s.canPlayType("audio/m4b;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(s.canPlayType("audio/x-mp4;")||s.canPlayType("audio/mp4;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(i||!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(i||!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!s.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(s.canPlayType("audio/x-flac;")||s.canPlayType("audio/flac;")).replace(/^no$/,"")}),r},_unlockAudio:function(){var a,u=this||x;if(!u._audioUnlocked&&u.ctx)return u._audioUnlocked=!1,u.autoUnlock=!1,u._mobileUnloaded||44100===u.ctx.sampleRate||(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050),a=function(t){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var e=new Audio;e._unlocked=!0,u._releaseHtml5Audio(e)}catch(t){u.noAudio=!0;break}for(var n=0;n<u._howls.length;n++)if(!u._howls[n]._webAudio)for(var i=u._howls[n]._getSoundIds(),r=0;r<i.length;r++){var s=u._howls[n]._soundById(i[r]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}u._autoResume();var o=u.ctx.createBufferSource();o.buffer=u._scratchBuffer,o.connect(u.ctx.destination),void 0===o.start?o.noteOn(0):o.start(0),"function"==typeof u.ctx.resume&&u.ctx.resume(),o.onended=function(){o.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var t=0;t<u._howls.length;t++)u._howls[t]._emit("unlock")}},document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),u},_obtainHtml5Audio:function(){var t=this||x;return t._html5AudioPool.length?t._html5AudioPool.pop():((t=(new Audio).play())&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio)},_releaseHtml5Audio:function(t){var e=this||x;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&x.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){var t;e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())},e.ctx.suspend().then(t,t))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&x.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var x=new t,s=(e.prototype={init:function(t){var e=this;return x.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=x.usingWebAudio&&!e._html5,void 0!==x.ctx&&x.ctx&&x.autoUnlock&&x._unlockAudio(),x._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(x.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n,i,r=0;r<t._src.length;r++){if(t._format&&t._format[r])n=t._format[r];else{if("string"!=typeof(i=t._src[r])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}n=(n=(n=/^data:audio\/([^;,]+);/i.exec(i))||/\.([^.]+)$/.exec(i.split("?",1)[0]))&&n[1].toLowerCase()}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&x.codecs(n)){e=t._src[r];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new s(t),t._webAudio&&a(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var i=this,t=null;if("number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,t=i._sounds[s]._id);1===r?e=null:t=null}}var o,a=t?i._soundById(t):i._inactiveSound();if(!a)return null;if(t&&!e&&(e=a._sprite||"__default"),"loaded"!==i._state)return a._sprite=e,a._ended=!1,o=a._id,i._queue.push({event:"play",action:function(){i.play(o)}}),o;if(t&&!a._paused)return n||i._loadQueue("play"),a._id;i._webAudio&&x._autoResume();var u,h,l,c,d=Math.max(0,0<a._seek?a._seek:i._sprite[e][0]/1e3),_=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-d),p=1e3*_/Math.abs(a._rate),m=i._sprite[e][0]/1e3,f=(i._sprite[e][0]+i._sprite[e][1])/1e3,y=(a._sprite=e,a._ended=!1,function(){a._paused=!1,a._seek=d,a._start=m,a._stop=f,a._loop=!(!a._loop&&!i._sprite[e][2])});if(!(f<=d))return u=a._node,i._webAudio?(l=function(){i._playLock=!1,y(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;u.gain.setValueAtTime(t,x.ctx.currentTime),a._playStart=x.ctx.currentTime,void 0===u.bufferSource.start?a._loop?u.bufferSource.noteGrainOn(0,d,86400):u.bufferSource.noteGrainOn(0,d,_):a._loop?u.bufferSource.start(0,d,86400):u.bufferSource.start(0,d,_),p!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),p)),n||setTimeout(function(){i._emit("play",a._id),i._loadQueue()},0)},"running"===x.state&&"interrupted"!==x.ctx.state?l():(i._playLock=!0,i.once("resume",l),i._clearTimer(a._id))):(h=function(){u.currentTime=d,u.muted=a._muted||i._muted||x._muted||u.muted,u.volume=a._volume*x.volume(),u.playbackRate=a._rate;try{var t=u.play();t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)?(i._playLock=!0,y(),t.then(function(){i._playLock=!1,u._unlocked=!0,n?i._loadQueue():i._emit("play",a._id)}).catch(function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(i._playLock=!1,y(),i._emit("play",a._id)),u.playbackRate=a._rate,u.paused?i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."):"__default"!==e||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),p):(i._endTimers[a._id]=function(){i._ended(a),u.removeEventListener("ended",i._endTimers[a._id],!1)},u.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===u.src&&(u.src=i._src,u.load()),l=window&&window.ejecta||!u.readyState&&x._navigator.isCocoonJS,3<=u.readyState||l?h():(i._playLock=!0,i._state="loading",c=function(){i._state="loaded",h(),u.removeEventListener(x._canPlayEvent,c,!1)},u.addEventListener(x._canPlayEvent,c,!1),i._clearTimer(a._id))),a._id;i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)e._queue.push({event:"pause",action:function(){e.pause(t)}});else for(var n=e._getSoundIds(t),i=0;i<n.length;i++){e._clearTimer(n[i]);var r=e._soundById(n[i]);if(r&&!r._paused&&(r._seek=e.seek(n[i]),r._rateSeek=0,r._paused=!0,e._stopFade(n[i]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)n._queue.push({event:"stop",action:function(){n.stop(t)}});else for(var i=n._getSoundIds(t),r=0;r<i.length;r++){n._clearTimer(i[r]);var s=n._soundById(i[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,n._stopFade(i[r]),s._node&&(n._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),n._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&n._clearSound(s._node))),e||n._emit("stop",s._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)n._queue.push({event:"mute",action:function(){n.mute(t,e)}});else{if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var i=n._getSoundIds(e),r=0;r<i.length;r++){var s=n._soundById(i[r]);s&&(s._muted=t,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,x.ctx.currentTime):s._node&&(s._node.muted=!!x._muted||t),n._emit("mute",s._id))}}return n},volume:function(){var t,e,n=this,i=arguments;if(0===i.length)return n._volume;if(1===i.length||2===i.length&&void 0===i[1]?0<=n._getSoundIds().indexOf(i[0])?r=parseInt(i[0],10):t=parseFloat(i[0]):2<=i.length&&(t=parseFloat(i[0]),r=parseInt(i[1],10)),!(void 0!==t&&0<=t&&t<=1))return(e=r?n._soundById(r):n._sounds[0])?e._volume:0;if("loaded"!==n._state||n._playLock)n._queue.push({event:"volume",action:function(){n.volume.apply(n,i)}});else{void 0===r&&(n._volume=t);for(var r=n._getSoundIds(r),s=0;s<r.length;s++)(e=n._soundById(r[s]))&&(e._volume=t,i[2]||n._stopFade(r[s]),n._webAudio&&e._node&&!e._muted?e._node.gain.setValueAtTime(t,x.ctx.currentTime):e._node&&!e._muted&&(e._node.volume=t*x.volume()),n._emit("volume",e._id))}return n},fade:function(t,e,n,i){var r=this;if("loaded"!==r._state||r._playLock)r._queue.push({event:"fade",action:function(){r.fade(t,e,n,i)}});else{t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),n=parseFloat(n),r.volume(t,i);for(var s=r._getSoundIds(i),o=0;o<s.length;o++){var a,u,h=r._soundById(s[o]);h&&(i||r._stopFade(s[o]),r._webAudio&&!h._muted&&(u=(a=x.ctx.currentTime)+n/1e3,h._volume=t,h._node.gain.setValueAtTime(t,a),h._node.gain.linearRampToValueAtTime(e,u)),r._startFadeInterval(h,t,e,n,s[o],void 0===i))}}return r},_startFadeInterval:function(e,n,i,r,t,s){var o=this,a=n,u=i-n,h=Math.abs(u/.01),h=Math.max(4,0<h?r/h:r),l=Date.now();e._fadeTo=i,e._interval=setInterval(function(){var t=(Date.now()-l)/r;l=Date.now(),a+=u*t,a=Math.round(100*a)/100,a=u<0?Math.max(i,a):Math.min(i,a),o._webAudio?e._volume=a:o.volume(a,e._id,!0),s&&(o._volume=a),(i<n&&a<=i||n<i&&i<=a)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(i,e._id),o._emit("fade",e._id))},h)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(x.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,i=this,r=arguments;if(0===r.length)return i._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(n=i._soundById(parseInt(r[0],10)))&&n._loop;i._loop=t=r[0]}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s=i._getSoundIds(e),o=0;o<s.length;o++)(n=i._soundById(s[o]))&&(n._loop=t,i._webAudio)&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t)&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,i.playing(s[o]))&&(i.pause(s[o],!0),i.play(s[o],!0));return i},rate:function(){var t,e=this,n=arguments;if(0===n.length?s=e._sounds[0]._id:1===n.length?0<=e._getSoundIds().indexOf(n[0])?s=parseInt(n[0],10):t=parseFloat(n[0]):2===n.length&&(t=parseFloat(n[0]),s=parseInt(n[1],10)),"number"!=typeof t)return((r=e._soundById(s))||e)._rate;if("loaded"!==e._state||e._playLock)e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}});else{void 0===s&&(e._rate=t);for(var i,r,s=e._getSoundIds(s),o=0;o<s.length;o++)(r=e._soundById(s[o]))&&(e.playing(s[o])&&(r._rateSeek=e.seek(s[o]),r._playStart=e._webAudio?x.ctx.currentTime:r._playStart),r._rate=t,e._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(t,x.ctx.currentTime):r._node&&(r._node.playbackRate=t),i=e.seek(s[o]),i=1e3*((e._sprite[r._sprite][0]+e._sprite[r._sprite][1])/1e3-i)/Math.abs(r._rate),!e._endTimers[s[o]]&&r._paused||(e._clearTimer(s[o]),e._endTimers[s[o]]=setTimeout(e._ended.bind(e,r),i)),e._emit("rate",r._id))}return e},seek:function(){var t,e,n=this,i=arguments;if(0===i.length?n._sounds.length&&(e=n._sounds[0]._id):1===i.length?0<=n._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(i[0])):2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10)),void 0===e)return 0;if("number"!=typeof t||"loaded"===n._state&&!n._playLock){var r,s,o,a,u,h=n._soundById(e);if(h){if(!("number"==typeof t&&0<=t))return n._webAudio?(a=n.playing(e)?x.ctx.currentTime-h._playStart:0,u=h._rateSeek?h._rateSeek-h._seek:0,h._seek+(u+a*Math.abs(h._rate))):h._node.currentTime;(r=n.playing(e))&&n.pause(e,!0),h._seek=t,h._ended=!1,n._clearTimer(e),n._webAudio||!h._node||isNaN(h._node.duration)||(h._node.currentTime=t),s=function(){r&&n.play(e,!0),n._emit("seek",e)},r&&!n._webAudio?(o=function(){n._playLock?setTimeout(o,0):s()},setTimeout(o,0)):s()}}else n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}});return n},playing:function(t){if("number"==typeof t)return!!(t=this._soundById(t))&&!t._paused;for(var e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(t){var e=this._duration,t=this._soundById(t);return e=t?this._sprite[t._sprite][1]/1e3:e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(x._canPlayEvent,e[n]._loadFn,!1),e[n]._node.removeEventListener("ended",e[n]._endFn,!1),x._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);for(var i=x._howls.indexOf(t),r=(0<=i&&x._howls.splice(i,1),!0),n=0;n<x._howls.length;n++)if(x._howls[n]._src===t._src||0<=t._src.indexOf(x._howls[n]._src)){r=!1;break}return o&&r&&delete o[t._src],x.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,n,i){t=this["_on"+t];return"function"==typeof e&&t.push(i?{id:n,fn:e,once:i}:{id:n,fn:e}),this},off:function(t,e,n){var i=this,r=i["_on"+t],s=0;if("number"==typeof e&&(n=e,e=null),e||n)for(s=0;s<r.length;s++){var o=n===r[s].id;if(e===r[s].fn&&o||!e&&o){r.splice(s,1);break}}else if(t)i["_on"+t]=[];else for(var a=Object.keys(i),s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(i[a[s]])&&(i[a[s]]=[]);return i},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var i=this,r=i["_on"+t],s=r.length-1;0<=s;s--)r[s].id&&r[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(i,r[s].fn),0),r[s].once&&i.off(t,r[s].fn,r[s].id));return i._loadQueue(t),i},_loadQueue:function(t){var e,n=this;return 0<n._queue.length&&((e=n._queue[0]).event===t&&(n._queue.shift(),n._loadQueue()),t||e.action()),n},_ended:function(t){var e,n=this,i=t._sprite;return!n._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop?setTimeout(n._ended.bind(n,t),100):(i=!(!t._loop&&!n._sprite[i][2]),n._emit("end",t._id),!n._webAudio&&i&&n.stop(t._id,!0).play(t._id),n._webAudio&&i&&(n._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=x.ctx.currentTime,e=1e3*(t._stop-t._start)/Math.abs(t._rate),n._endTimers[t._id]=setTimeout(n._ended.bind(n,t),e)),n._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,n._clearTimer(t._id),n._cleanBuffer(t._node),x._autoSuspend()),n._webAudio||i||n.stop(t._id,!0)),n},_clearTimer:function(t){var e,n=this;return n._endTimers[t]&&("function"!=typeof n._endTimers[t]?clearTimeout(n._endTimers[t]):(e=n._soundById(t))&&e._node&&e._node.removeEventListener("ended",n._endTimers[t],!1),delete n._endTimers[t]),n},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new s(t)},_drain:function(){var t=this,e=t._pool,n=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&n++;for(i=t._sounds.length-1;0<=i;i--){if(n<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),n--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=x.ctx.createBufferSource(),t._node.bufferSource.buffer=o[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,x.ctx.currentTime),this},_cleanBuffer:function(t){var e=x._navigator&&0<=x._navigator.vendor.indexOf("Apple");if(x._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=x._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(x._navigator&&x._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}},function(t){this._parent=t,this.init()}),o=(s.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++x._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=x._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),t._node.gain.setValueAtTime(n,x.ctx.currentTime),t._node.paused=!0,t._node.connect(x.masterGain)):x.noAudio||(t._node=x._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(x._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=n*x.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++x._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(x._canPlayEvent,this._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}},{}),a=function(e){var t=e._src;if(o[t])e._duration=o[t].duration,l(e);else if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);h(i.buffer,e)}else{var s=new XMLHttpRequest;s.open(e._xhr.method,t,!0),s.withCredentials=e._xhr.withCredentials,s.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){s.setRequestHeader(t,e._xhr.headers[t])}),s.onload=function(){var t=(s.status+"")[0];"0"!==t&&"2"!==t&&"3"!==t?e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+"."):h(s.response,e)},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},u(s)}},u=function(e){try{e.send()}catch(t){e.onerror()}},h=function(t,e){function n(){e._emit("loaderror",null,"Decoding audio data failed.")}function i(t){t&&0<e._sounds.length?(o[e._src]=t,l(e,t)):n()}"undefined"!=typeof Promise&&1===x.ctx.decodeAudioData.length?x.ctx.decodeAudioData(t).then(i).catch(n):x.ctx.decodeAudioData(t,i,n)},l=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){if(x.usingWebAudio){try{"undefined"!=typeof AudioContext?x.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?x.ctx=new webkitAudioContext:x.usingWebAudio=!1}catch(t){x.usingWebAudio=!1}x.ctx||(x.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(x._navigator&&x._navigator.platform),e=x._navigator&&x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),e=e?parseInt(e[1],10):null;t&&e&&e<9&&(t=/safari/.test(x._navigator&&x._navigator.userAgent.toLowerCase()),x._navigator)&&!t&&(x.usingWebAudio=!1),x.usingWebAudio&&(x.masterGain=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),x.masterGain.gain.setValueAtTime(x._muted?0:x._volume,x.ctx.currentTime),x.masterGain.connect(x.ctx.destination)),x._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:x,Howl:e}}),"undefined"!=typeof exports&&(exports.Howler=x,exports.Howl=e),"undefined"!=typeof global?(global.HowlerGlobal=t,global.Howler=x,global.Howl=e,global.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=x,window.Howl=e,window.Sound=s)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(e.ctx&&e.ctx.listener)for(var n=e._howls.length-1;0<=n;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var i=this;if(i.ctx&&i.ctx.listener){if(e="number"!=typeof e?i._pos[1]:e,n="number"!=typeof n?i._pos[2]:n,"number"!=typeof t)return i._pos;i._pos=[t,e,n],void 0!==i.ctx.listener.positionX?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2])}return i},HowlerGlobal.prototype.orientation=function(t,e,n,i,r,s){var o=this;if(o.ctx&&o.ctx.listener){var a=o._orientation;if(e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,i="number"!=typeof i?a[3]:i,r="number"!=typeof r?a[4]:r,s="number"!=typeof s?a[5]:s,"number"!=typeof t)return a;o._orientation=[t,e,n,i,r,s],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(t,e,n,i,r,s)}return o},Howl.prototype.init=(n=Howl.prototype.init,function(t){var e=this;return e._orientation=t.orientation||[1,0,0],e._stereo=t.stereo||null,e._pos=t.pos||null,e._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},e._onstereo=t.onstereo?[{fn:t.onstereo}]:[],e._onpos=t.onpos?[{fn:t.onpos}]:[],e._onorientation=t.onorientation?[{fn:t.onorientation}]:[],n.call(this,t)}),Howl.prototype.stereo=function(t,e){var n=this;if(n._webAudio)if("loaded"!==n._state)n._queue.push({event:"stereo",action:function(){n.stereo(t,e)}});else{var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(e),s=0;s<r.length;s++){var o=n._soundById(r[s]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||h(o,i),"spatial"==i?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}}return n},Howl.prototype.pos=function(t,e,n,i){var r=this;if(r._webAudio)if("loaded"!==r._state)r._queue.push({event:"pos",action:function(){r.pos(t,e,n,i)}});else{if(e="number"!=typeof e?0:e,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof t)return r._pos;r._pos=[t,e,n]}for(var s=r._getSoundIds(i),o=0;o<s.length;o++){var a=r._soundById(s[o]);if(a){if("number"!=typeof t)return a._pos;a._pos=[t,e,n],a._node&&(a._panner&&!a._panner.pan||h(a,"spatial"),void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):a._panner.setPosition(t,e,n)),r._emit("pos",a._id)}}}return r},Howl.prototype.orientation=function(t,e,n,i){var r=this;if(r._webAudio)if("loaded"!==r._state)r._queue.push({event:"orientation",action:function(){r.orientation(t,e,n,i)}});else{if(e="number"!=typeof e?r._orientation[1]:e,n="number"!=typeof n?r._orientation[2]:n,void 0===i){if("number"!=typeof t)return r._orientation;r._orientation=[t,e,n]}for(var s=r._getSoundIds(i),o=0;o<s.length;o++){var a=r._soundById(s[o]);if(a){if("number"!=typeof t)return a._orientation;a._orientation=[t,e,n],a._node&&(a._panner||(a._pos||(a._pos=r._pos||[0,0,-.5]),h(a,"spatial")),void 0!==a._panner.orientationX?(a._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):a._panner.setOrientation(t,e,n)),r._emit("orientation",a._id)}}}return r},Howl.prototype.pannerAttr=function(){var t,e,n=this,i=arguments;if(n._webAudio){if(0===i.length)return n._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return((o=n._soundById(parseInt(i[0],10)))||n)._pannerAttr;t=i[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var r,s,o,a=n._getSoundIds(e),u=0;u<a.length;u++)(o=n._soundById(a[u]))&&(r=o._pannerAttr,r={coneInnerAngle:(void 0!==t.coneInnerAngle?t:r).coneInnerAngle,coneOuterAngle:(void 0!==t.coneOuterAngle?t:r).coneOuterAngle,coneOuterGain:(void 0!==t.coneOuterGain?t:r).coneOuterGain,distanceModel:(void 0!==t.distanceModel?t:r).distanceModel,maxDistance:(void 0!==t.maxDistance?t:r).maxDistance,refDistance:(void 0!==t.refDistance?t:r).refDistance,rolloffFactor:(void 0!==t.rolloffFactor?t:r).rolloffFactor,panningModel:(void 0!==t.panningModel?t:r).panningModel},(s=o._panner)?(s.coneInnerAngle=r.coneInnerAngle,s.coneOuterAngle=r.coneOuterAngle,s.coneOuterGain=r.coneOuterGain,s.distanceModel=r.distanceModel,s.maxDistance=r.maxDistance,s.refDistance=r.refDistance,s.rolloffFactor=r.rolloffFactor,s.panningModel=r.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),h(o,"spatial")))}return n},Sound.prototype.init=(i=Sound.prototype.init,function(){var t=this,e=t._parent;t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,i.call(this),t._stereo?e.stereo(t._stereo):t._pos&&e.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}),Sound.prototype.reset=(r=Sound.prototype.reset,function(){var t=this,e=t._parent;return t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,t._stereo?e.stereo(t._stereo):t._pos?e.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,e._refreshBuffer(t)),r.call(this)});var n,i,r,h=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}();class Game{static assets={};static singleton=new Game;static deltatime=0;static timescale=1;static camera=void 0;constructor(){this.entities=[],this.services={},this.coroutines=[],this.framewise_coroutines=[],this.background_color="#000"}run(t,e){this.canvas=t,this.last_timestamp=(new Date).getTime();t=this.canvas.getContext("2d");setInterval(this.step_game_frame.bind(this,t),1e3/e)}step_game_frame(t){var e;document.hasFocus()&&(e=(new Date).getTime(),Game.deltatime=Game.timescale*Math.min((e-this.last_timestamp)/1e3,.1),this.last_timestamp=e,this.update(),this.draw(t))}update(){try{this.update_coroutines();for(var t of this.entities.filter(t=>t.active).sort(function(t,e){return t.u_index-e.u_index}))t.update();for(var e of Object.keys(this.services))this.services[e].update();Game.camera?.update(),Input.singleton.update()}catch(t){console.error(t)}}draw(t){try{t.imageSmoothingEnabled=!1,t.globalCompositeOperation="source-over",t.globalAlpha=1,t.fillStyle=this.background_color,t.fillRect(0,0,this.canvas.width,this.canvas.height);var e,n,i=this.entities.filter(t=>t.active&&t instanceof Screen3DEntity),r=(i.forEach(t=>t.delta=Game.camera.transform_world_to_camera(t.r.p)),(i=i.filter(t=>0<t.delta.y&&t.delta.y<Game.render_distance)).sort(function(t,e){return e.delta.y-t.delta.y}),Object.values(this.services)),s=(r.sort(function(t,e){return t.z_index-e.z_index}),this.entities.filter(t=>t.active&&(t instanceof ScreenEntity||t instanceof TextEntity)&&!(t instanceof Screen3DEntity)));s.sort(function(t,e){return t.z_index-e.z_index}),r.sort(function(t,e){return t.z_index-e.z_index}),t.save();for(n of r.filter(t=>t.z_index<0))n.draw(t);t.save(),Game.camera&&t.translate(-Game.camera.r.p.x+Game.camera.r.s.x/2,-Game.camera.r.p.y+Game.camera.r.s.y/2),t.translate(-.5,-.5);for(e of s.filter(t=>t.z_index<0))e.draw(t);t.translate(.5,.5);for(e of i)e.draw(t);t.translate(-.5,-.5);for(e of s.filter(t=>0<=t.z_index))e.draw(t);t.restore();for(n of r)0<=n.z_index&&n.draw(t);t.restore()}catch(t){console.error(t)}}update_coroutines(){var t,e,n=[];for(t of[...this.coroutines])t.until_condition?(t.timer+=Game.deltatime,t.until_condition()?(t.callback&&t.callback(t.timer),n.push(t)):t.frame_callback&&t.frame_callback(t.timer)):(t.timer-=Game.deltatime)<=0?((void 0===t.interval||(t.timer+=t.interval,t.times&&--t.times<=0))&&n.push(t),t.callback&&t.callback()):t.frame_callback&&t.frame_callback(t.timer);this.coroutines=this.coroutines.filter(t=>!n.includes(t));for(t of n)for(;t?.chain;)t=t.chain.then_callback?(e=t.chain.then_callback())instanceof ChainableCoroutine?e:t.chain:void this.coroutines.push(t.chain)}static add(t){return Game.singleton.add(t)}add(t){if(t instanceof Array)for(var e of t)(e.parent=this).entities.push(e);else(t.parent=this).entities.push(t);return t}static remove(t){Game.singleton.remove(t)}remove(e){var t;e instanceof Array?this.entities=this.entities.filter(t=>!e.includes(t)):-1!==(t=this.entities.indexOf(e))&&this.entities.splice(t,1)}static after(t,e){t=new ChainableCoroutine({timer:t,callback:e});return Game.singleton.coroutines.push(t),t}static every(t,e,n){return e=n?new ChainableCoroutine({interval:t,times:e,timer:t,callback:n}):(n=e,new ChainableCoroutine({interval:t,timer:t,callback:n})),Game.singleton.coroutines.push(e),e}static until(t,e,n){t=new ChainableCoroutine({timer:0,until_condition:t,frame_callback:e,callback:n});return Game.singleton.coroutines.push(t),t}static transition(e,n,t){t=new ChainableCoroutine({timer:e,frame_callback:t=>n(1-Math.max(0,t/e)),callback:t});return Game.singleton.coroutines.push(t),t}static add_service(t,e){return Game.singleton.services[t]=e}}class ChainableCoroutine{constructor(t){Object.assign(this,t)}then(t){return this.chain=new ChainableCoroutine({then_callback:t}),this.chain}then_after(t,e){return this.chain=()=>Game.after(t,e),this.chain}then_every(t,e,n){return this.chain=()=>Game.every(t,e,n),this.chain}then_until(t,e,n){return this.chain=()=>Game.until(t,e,n),this.chain}then_transition(e,n,t){return this.chain=new ChainableCoroutine({timer:e,frame_callback:t=>n(1-Math.max(0,t/e)),callback:t}),this.chain}}class Input{static singleton=new Input;constructor(){this.previous_keystate={},this.keystate={},this.previous_mouse1_state=!1,this.mouse1_state=!1,Input.mouse_position=vec(0,0),Input.mouse_game_position=vec(0,0),window.addEventListener("load",()=>{document.addEventListener("keydown",function(t){t=t||window.event,this.keystate.ctrl||t.preventDefault();String.fromCharCode(t.keyCode);this.keystate[t.key.toLowerCase()]=!0,this.keystate.shift=!!t.shiftKey,this.keystate.ctrl=!!t.ctrlKey,this.keystate.alt=!!t.altKey}.bind(this)),document.addEventListener("keyup",function(t){t=t||window.event,this.keystate.ctrl||t.preventDefault();String.fromCharCode(t.keyCode);this.keystate[t.key.toLowerCase()]=!1,this.keystate.shift=!!t.shiftKey,this.keystate.ctrl=!!t.ctrlKey,this.keystate.alt=!!t.altKey}.bind(this)),document.addEventListener("mousedown",t=>{this.update_mouse_position(t),this.mouse1_state=!0}),document.addEventListener("mouseup",t=>{this.update_mouse_position(t),this.mouse1_state=!1}),document.addEventListener("mousemove",t=>{this.update_mouse_position(t)})})}update_mouse_position(t){var e;Game.singleton?.canvas&&(e=t.x-Game.singleton.canvas.getBoundingClientRect().left,t=t.y-Game.singleton.canvas.getBoundingClientRect().top,Input.mouse_position=vec(e,t),Input.mouse_game_position=Game.camera?Game.camera.translate_screen_to_world(Input.mouse_position):Input.mouse_position)}update(){this.previous_keystate=this.keystate,this.keystate=Object.assign({},this.keystate),this.previous_mouse1_state=this.mouse1_state}static is_mouse_pressed(){return!Input.singleton.previous_mouse1_state&&Input.singleton.mouse1_state}static is_mouse_down(){return Input.singleton.mouse1_state}static is_mouse_released(){return Input.singleton.previous_mouse1_state&&!Input.singleton.mouse1_state}static is_key_pressed(t){return Input.singleton.keystate[t]&&!Input.singleton.previous_keystate[t]}static is_key_down(t){return Input.singleton.keystate[t]}static is_key_released(t){return!Input.singleton.keystate[t]&&Input.singleton.previous_keystate[t]}}class SpriteLoad{static load_image(i){return new Promise((t,e)=>{var n=document.querySelector("img[data-url='"+i+"']");if(!n)return t(SpriteLoad.load_image_remote(i));t(n)})}static load_image_remote(i){return new Promise((t,e)=>{var n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",t=>e(t)),n.src=i+"?t="+(new Date).getTime(),n.dataset.url=i})}static load_font_remote(t,e){return new FontFace(t,"url("+e+")").load().then(t=>(document.fonts.add(t),t))}static load_levels_remote(t,e){return t+="?t="+(new Date).getTime(),fetch(t).then(t=>t.json())}static load_all(e){return new Promise((n,i)=>{var t=e.images,r=e.levels,s=e.fonts,o={images:{},fonts:{},levels:{}},a=0,u=0;if(t&&(u+=Object.keys(t).length),s&&(u+=Object.keys(s).length),r&&(u+=Object.keys(r).length),t)for(var h of Object.keys(t)){let e=h;SpriteLoad.load_image(t[e]).then(t=>{o.images[e]=t,u<=++a&&(Game.assets=o,n(o))}).catch(t=>i(t))}if(s)for(var h of Object.keys(s)){let e=h;SpriteLoad.load_font_remote(e,s[e]).then(t=>{o.fonts[e]=t,u<=++a&&(Game.assets=o,n(o))}).catch(t=>i(t))}if(r)for(var h of Object.keys(r)){let e=h;SpriteLoad.load_levels_remote(r[e]).then(t=>{o.levels[e]=t,u<=++a&&(Game.assets=o,n(o))}).catch(t=>i(t))}})}static enable_live_reload(t){setInterval(()=>{if(document.hasFocus())for(var e of Object.keys(images)){let t=e;SpriteLoad.load_image(images[t]).then(e=>{var n=Game.assets.images[t];Game.assets.images[t]=e,null!=n.subimg&&SpriteLoad.slice_tilesheet(e,n.subimg.sx,n.subimg.sy),Game.singleton.entities.filter(t=>t instanceof ScreenEntity&&t.spritesheet===n).forEach(t=>{t.spritesheet=e}),Game.singleton.entities.filter(t=>t instanceof ScreenEntity&&t.spritesheet.tilesheet===n).forEach(t=>{t.spritesheet=e.subimg(t.spritesheet.x,t.spritesheet.y)})})}},1e3)}static slice_tilesheet(n,t,e){for(var i=0,r=0;r<n.height;r+=e)for(var s=0;s<n.width;s+=t){var o=document.createElement("canvas"),a=(o.width=t,o.height=e,o.getContext("2d"));a.imageSmoothingEnabled=!1,a.drawImage(n,-s,-r),o.x=s/t,o.y=r/e,(o.tilesheet=n)["i_"+s/t+"_"+r/e]=o,n["i_"+i++]=o}n.subimg=(t,e)=>n["i_"+t+"_"+e],n.subimg_index=t=>n["i_"+t],n.subimg.sx=t,n.subimg.sy=e}static load_json(i){return new Promise((t,e)=>{var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",i,!0),n.onreadystatechange=()=>{4===n.readyState&&"200"==n.status&&t(JSON.parse(n.responseText))},n.send(null)})}static render_img_color(t,e){var n=document.createElement("canvas"),i=(n.width=t.width,n.height=t.height,n.getContext("2d"));return i.imageSmoothingEnabled=!1,i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=e,i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),n}}class Entity{constructor(){this.sub_entities=[],this.active=!0,this.z_index=0,this.u_index=0}update(){this.sub_entities.filter(t=>t.active).forEach(t=>t.update())}draw(e){var t=this.sub_entities.filter(t=>t.active);t.sort(function(t,e){return t.z_index-e.z_index}),t.forEach(t=>t.draw(e))}add(t){if(t instanceof Array)for(var e of t)(e.parent=this).sub_entities.push(e);else(t.parent=this).sub_entities.push(t)}remove(e){var t;e instanceof Array?this.sub_entities=this.sub_entities.filter(t=>!e.includes(t)):-1!==(t=this.sub_entities.indexOf(e))&&this.sub_entities.splice(t,1)}}class Rect{constructor(t,e){this.p=t,this.s=e}contains(t){return Math.abs(t.x-this.p.x)<this.s.x/2&&Math.abs(t.y-this.p.y)<this.s.y/2}intersects(t){return!(this.p.x+this.s.x/2<=t.p.x-t.s.x/2||this.p.x-this.s.x/2>=t.p.x+t.s.x/2||this.p.y+this.s.y/2<=t.p.y-t.s.y/2||this.p.y-this.s.y/2>=t.p.y+t.s.y/2)}maximum_noncolliding_delta(t,e){return 0<(e=e.clone()).x?e.x=Math.max(0,Math.min(e.x,t.p.x-t.s.x/2-(this.p.x+this.s.x/2))):e.x<0&&(e.x=Math.min(0,Math.max(e.x,t.p.x+t.s.x/2-(this.p.x-this.s.x/2)))),0<e.y?e.y=Math.max(0,Math.min(e.y,t.p.y-t.s.y/2-(this.p.y+this.s.y/2))):e.y<0&&(e.y=Math.min(0,Math.max(e.y,t.p.y+t.s.y/2-(this.p.y-this.s.y/2)))),e}box_point(t){return t.x<this.p.x-this.s.x/2&&(t.x=this.p.x-this.s.x/2),t.x>this.p.x+this.s.x/2&&(t.x=this.p.x+this.s.x/2),t.y<this.p.y-this.s.y/2&&(t.y=this.p.y-this.s.y/2),t.y>this.p.y+this.s.y/2&&(t.y=this.p.y+this.s.y/2),t}clone(){return new Rect(this.p.clone(),this.s.clone())}}function rect(t,e){return new Rect(t,e)}class ScreenEntity extends Entity{constructor(t,e,n,i=1){super(),this.spritesheet=t,this.r=rect(e,n),this.angle=0,this.alpha=1,this.frame=0,this.max_frame=i}draw(e){e.save(),e.globalAlpha=this.alpha,e.translate(this.r.p.x,this.r.p.y),e.rotate(this.angle);var t=this.sub_entities.filter(t=>t.active);t.sort(function(t,e){return t.z_index-e.z_index}),t.filter(t=>t.z_index<this.z_index).forEach(t=>t.draw(e)),this.draw_self(e),t.filter(t=>t.z_index>=this.z_index).forEach(t=>t.draw(e)),e.restore()}draw_self(t){this.spritesheet&&t.drawImage(this.spritesheet,this.frame*(this.spritesheet.width/this.max_frame),0,this.spritesheet.width/this.max_frame,this.spritesheet.height,0-this.r.s.x/2,0-this.r.s.y/2,this.r.s.x,this.r.s.y)}}class Screen3DEntity extends ScreenEntity{constructor(t,e,n,i=1){super(),this.spritesheet=t,this.r=rect(e,n),this.angle=0,this.alpha=1,this.frame=0,this.max_frame=i,this.height=1,this.collider_r=this.r}draw(t){t.save(),t.globalAlpha=this.alpha*Math.min(1,Math.max(0,(Game.render_distance-this.delta.y)/(Game.render_distance-Game.render_fade_distance)));var e=vec(0,1),n=this.delta;0<e.dot(n)&&(e=n.y,t.scale(1/e,1/e),t.translate(n.x,-n.z),this.draw_self(t)),t.restore()}draw_self(t){this.spritesheet&&t.drawImage(this.spritesheet,this.frame*(this.spritesheet.width/this.max_frame),0,this.spritesheet.width/this.max_frame,this.spritesheet.height,0-this.r.s.x/2,0-this.r.s.y/2,this.r.s.x,this.r.s.y)}}class TextEntity extends Entity{constructor(t,e="",n=30,i="#f00",r="#800"){super(),this.text=e,this.p=t,this.size=n,this.color=i,this.shadow_color=r}draw(n){n.save(),n.globalAlpha=this.alpha,n.translate(this.p.x,this.p.y),n.rotate(this.angle),n.scale(.001,.001),n.save(),n.translate(2,2),n.font=this.size+"px dogicabold",n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.shadow_color;var i=this.text.split("\n");i.forEach((t,e)=>{n.fillText(t,0,(e-i.length/2+.5)*this.size*1.5)}),n.restore(),n.save(),n.font=this.size+"px dogicabold",n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.color,(i=this.text.split("\n")).forEach((t,e)=>{n.fillText(t,0,(e-i.length/2+.5)*this.size*1.5)}),n.restore(),n.restore()}}class GameCamera{constructor(t,e){this.r=rect(vec(t/2,e/2),vec(t,e)),this.scale=vec(1,1),this.angle=0,this.angleY=0,this.angleZ=0}translate_screen_to_world(t){return t.clone().sub(this.r.s.clone().multiplyScalar(.5)).add(this.r.p)}transform_world_to_camera(t){return t.clone().sub(this.r.p).applyEuler(new Euler(-this.angleY,-this.angleZ,-this.angle))}update(){}}class PhysicsEntity extends ScreenEntity{update(){super.update(),this.try_move(this.velocity)}try_move(t){this.r.p.add(t)}}class MobileEntity extends PhysicsEntity{constructor(t,e,n){super(t,e,n),this.speed=60,this.acceleration_time=2,this.velocity=vec(0,0)}accelerate(t){t=(t=t.clone().normalize()).multiplyScalar(this.speed);this.velocity=t.multiplyScalar(Game.deltatime/this.acceleration_time).add(this.velocity.multiplyScalar(1-Game.deltatime/this.acceleration_time))}}class Player extends MobileEntity{constructor(t,e=vec(32,32)){super(Game.assets.images.entities.subimg(1,0),t,e),this.z_index=10,this.speed=60,this.acceleration_time=2,this.can_fire=!0,this.fire_cooldown=1}fire_at(t){this.can_fire=!1,Game.after(this.fire_cooldown,()=>this.can_fire=!0);t=t.clone().sub(this.r.p).normalize();Game.add(new ExplosiveProjectile(PlayerController.singleton.local_player,this.r.p.clone(),t,this.velocity.clone()))}}class BoidEntity extends MobileEntity{constructor(t,e=vec(32,32)){super(Game.assets.images.entities.subimg(2,0),t,e),this.z_index=8,this.speed=10,this.acceleration_time=1,this.jiggle_direction=vec(0,0).random2(),Game.every(.2,()=>{this.jiggle_direction=vec(0,0).random2()})}update(){var t=BoidController.singleton.explosions.filter(t=>t.r.p.distanceTo(this.r.p)<128).pop();t&&(t=this.r.p.clone().sub(t.r.p).normalize(),this.jiggle_direction=this.jiggle_direction.clone().multiplyScalar(.5).add(t.multiplyScalar(.5))),this.accelerate(this.jiggle_direction),super.update()}}class ExplosiveProjectile extends PhysicsEntity{constructor(t,e,n,i,r=vec(16,16)){super(Game.assets.images.entities.subimg(3,0),e,r),this.z_index=20,this.speed=10,this.owner=t,this.direction=n,this.carryover_velocity=i,this.velocity=this.direction.clone().multiplyScalar(this.speed).add(this.carryover_velocity),this.add(this.splash_marker=new ScreenEntity(Game.assets.images.entities.subimg(3,0),vec(0,0),vec(256,256))),this.splash_marker.alpha=.2,Game.after(.75,()=>{Game.add(new Explosion(this.owner,this.r.p.clone())),Game.remove(this)})}update(){super.update(),this.speed*=1-Game.deltatime,this.velocity=this.direction.clone().multiplyScalar(this.speed).add(this.carryover_velocity)}}class Explosion extends ScreenEntity{constructor(t,e,n=vec(1,1)){super(Game.assets.images.entities.subimg(3,0),e,n),Game.transition(.3,t=>{this.r.s=vec(300*t,300*t),BoidController.singleton.boids.filter(t=>t.r.p.clone().distanceTo(this.r.p)<this.r.s.x/2).forEach(t=>Game.remove(t))}).then(()=>Game.remove(this))}}class PlayerController extends Entity{static singleton=Game.add(new PlayerController);static local_player;update(){var t;PlayerController.singleton.local_player&&((t=vec(0,0)).x=Input.is_key_down("a")?-1:Input.is_key_down("d")?1:0,t.y=Input.is_key_down("s")?1:Input.is_key_down("w")?-1:0,PlayerController.singleton.local_player.accelerate(t),Input.is_mouse_pressed()&&PlayerController.singleton.local_player.can_fire&&PlayerController.singleton.local_player.fire_at(Input.mouse_game_position),Game.camera)&&(Game.camera.r.p=PlayerController.singleton.local_player.r.p.clone())}}class BoidController extends Entity{static singleton=Game.add(new BoidController);get boids(){return Game.singleton.entities.filter(t=>t instanceof BoidEntity)}get explosions(){return Game.singleton.entities.filter(t=>t instanceof ExplosiveProjectile||t instanceof Explosion)}}window.addEventListener("load",()=>{var i=document.querySelector("#game_canvas");document.querySelector("#version").innerText="v0.0.1",document.head.querySelector("#title").innerText=document.head.querySelector("#title").innerText.replace("{ver}","v0.0.1"),SpriteLoad.load_all({images:{entities:"assets/img/entities.png"}}).then(t=>{Game.singleton.background_color="#232836",SpriteLoad.slice_tilesheet(Game.assets.images.entities,8,8),Game.add(PlayerController.singleton.local_player=new Player(vec(0,0)));for(var e=50;e<500;e+=50)for(var n=50;n<500;n+=50)Game.add(new BoidEntity(vec(e,n)));Game.camera=new GameCamera(i.width,i.height),Game.singleton.run(i,60)}).catch(t=>{console.log("something went wrong in loading :/",t);var e=i.getContext("2d");e.fillStyle="#f00",e.fillText(`${t.type}: ${t.message}: ${t.stack}\n`,50,50)})});
</script><img style='display:none' data-url='assets/img/entities.png' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TRZFKB4uIOGSoThZERXTTKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQr3MNKtjDNB020wl4mImuyp2vSKIMPoxg6jMLGNOkpLwHV/3CPD1Lsaz/M/9OXrVnMWAgEg8ywzTJt4gntq0Dc77xBFWlFXic+JRky5I/Mh1xeM3zgWXBZ4ZMdOpeeIIsVhoY6WNWdHUiCeJo6qmU76Q8VjlvMVZK1dZ8578haGcvrLMdZpDSGARS5AgQkEVJZRhI0arToqFFO3HffyDrl8il0KuEhg5FlCBBtn1g//B726t/MS4lxSKA50vjvMxDHTtAo2a43wfO07jBAg+A1d6y1+pA9OfpNdaWvQICG8DF9ctTdkDLneAgSdDNmVXCtIU8nng/Yy+KQv03QI9a15vzX2cPgBp6ip5AxwcAiMFyl73eXd3e2//nmn29wO94XLFImSYjgAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cDEAEeNVMcPR4AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACt0lEQVR42u3cMW4TQRiG4X+idEuLKSJEgUwukAaRNiewlIomJUK+QA7ABSxEmYaGwidwjThDsKhQCkyLSzQUxKtg1o4hVtb2PK9kaZz15osz74xnN5k/HR+d5ljChyc/06x9MBzmiIirXi81vfaux9ECx0en+fHD542PiJjJkSMiz5g9n/tW+byq8nlVNR6LiDzud/K436nPP6uquOr1Wnvv8qvYW/XFv/v97/aqjPudSIcnkQ5PYtzvGHkbwt5qfZ8XCZFvjP762HW7Pjbr/Kev38ejk1e1BBfTadYFmy/A2vjx+WM8ePbCb33LBEgppaYvRkSk+dHfMAuk7mAS+XIU30bv4svbl5EvR9EdTOKsqiwGW2Z/1RemlOrP/nkh3kynt57fHUxi3B/VbWyQAF+/f7q1/687Pt983tBeen53MMn/cA7u4yPg+jp/2WO+I+/SeUnnF7wIBAFAABAAuyFAm/ex5a8n3wzgPoCRV3L+fwlwMBzW7bMbt4EvVrgjuA7kry9/fx0/0H29cfnrz7cGcBVg9JWcbwYwA4AAIAAIAAKAACAACAACgADYefYj/vyTYhvIby8/tf3PDWgZ+/PVB4BFIAgAAoAAIAAIAAKAACAACAACLMIuXfUBsOWoD1B4vvoAheerD1B4vjWAqwCjr+R8M4AZAAQAAUAAEAAEAAFAABAABMDOoz5AqA9gGJSM/fnqA8AiEAQAAUAAEAAEAAFAABAABAABFmGXrvoA2HLUByg8X32AwvPVByg83xrAVYDRV3K+GcAMAAKAACAACAACgAAgAAgAAmDnUR8g1AcwDErG/nz1AWARCAKAACAACAACgAAgAAgAAoAAi7BLV30AbDnqAxSerz5A4fnqAxSebw3gKsDoKznfDGAGAAFAABAABAABQAAQAAQAAbDzqA9QeP4vEe1uw+3CfLgAAAAASUVORK5CYII=' />
</head>
<body>
	<noscript>Javascript required for the game</noscript>
	<canvas id="game_canvas" width="960" height="800"></canvas>
	<p>Splash Tournament <span id='version'>{ver}</span></p>
	<p>An incomplete idea. Move with WASD, shoot with mouse click.</p>
</body>
</html>